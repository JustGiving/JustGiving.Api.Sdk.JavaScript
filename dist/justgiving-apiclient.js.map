{"version":3,"sources":["justgiving-apiclient.js"],"names":[],"mappings":"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","file":"justgiving-apiclient.js","sourcesContent":["class Pagination {\n  constructor(pageNum, pageSize) {\n    this.pageSizeRestriction = pageSize ? `pageSize=${pageSize}&` : '';\n    this.pageNumRestriction = pageNum ? `pageNum=${pageNum}&` : '';\n    this.pageRestriction = pageNum ? `page=${pageNum}&` : '';\n    this.limitRestriction = pageSize ? `limit=${pageSize}&` : '';\n    this.offsetRestriction = pageNum ? `offset=${pageNum}&` : '';\n  }\n}\n\nexport class ApiClient {\n  constructor(url, appId, accessToken) {\n    if (typeof url !== 'string') throw new Error('URL is required');\n    // if (url.indexOf('https') !== 0) throw new Error('Please use https only');\n    this._url = url;\n    this._appId = appId;\n    this._accessToken = accessToken;\n    this._version = 'v1';\n  }\n\n  _processParam(queryStr, key, value) {\n    if ( key && value) {\n      queryStr += (queryStr.length === 0) ? '?' : '&';\n      queryStr += key + '=' + value;\n    }\n\n    return queryStr;\n  }\n\n  _getOptions(payload, method) {\n    const options = {method: method || 'GET', headers: {'x-app-id': this._appId, Accept: 'application/json'}};\n    if (this._accessToken) {\n      options.headers['Authorization'] = this._accessToken;\n    }\n    if (payload || method === 'POST') {\n      options.method = method || 'POST';\n      options.body = JSON.stringify(payload);\n      options.headers['Content-Type'] = 'application/json';\n    }\n    return options;\n  }\n\n  _handleResponse(response) {\n    if (response.status >= 400) {\n      const contentType = response.headers.get('content-type');\n\n      if(contentType && contentType.indexOf('application/json') === 0) {\n        return response.json().then(json => {\n          if (json[0]) {\n            throw new Error(`${response.status} ${response.statusText}. ${json[0].id} : ${json[0].desc}`);\n          }\n        });\n      }\n\n      throw new Error(`${response.status} ${response.statusText}`);\n    }\n\n    return response.json();\n  }\n\n  _fetch(resource, payload, method) {\n    return fetch(`${this._url}/${this._version}/${resource}`, this._getOptions(payload, method)).then(this._handleResponse);\n  }\n\n  // Account resource\n  validateAccount(email, password) {\n    return this._fetch('account/validate', {email: email, password: password});\n  }\n\n  getFundraisingPagesForUser(email, charityId) {\n    const charityRestriction = (charityId ? `?charityId=${charityId}` : '');\n    return this._fetch(`account/${email}/pages${charityRestriction}`);\n  }\n\n  getDonationsForUser(pageSize, pageNum, charityId) {\n    const charityRestriction = (charityId ? `charityId=${charityId}&` : '');\n    const pagination = new Pagination(pageNum, pageSize);\n    return this._fetch(`account/donations?${pagination.pageSizeRestriction}${pagination.pageNumRestriction}${charityRestriction}`);\n  }\n\n  checkAccountAvailability(email) {\n    return this._fetch(`account/${encodeURIComponent(email)}`);\n  }\n\n  getContentFeed() {\n    return this._fetch('account/feed');\n  }\n\n  getAccountRating(pageSize, pageNum) {\n    const pagination = new Pagination(pageNum, pageSize);\n    return this._fetch(`account/rating?${pagination.pageSizeRestriction}${pagination.pageRestriction}`);\n  }\n\n  getAccount() {\n    return this._fetch('account');\n  }\n\n  getInterests() {\n    return this._fetch('account/interest');\n  }\n\n  addInterest(interest) {\n    return this._fetch('account/interest', {interest: interest});\n  }\n\n  replaceInterests(...interests) {\n    return this._fetch('account/interest', interests, 'PUT');\n  }\n\n  requestPasswordReminder(email) {\n    return this._fetch(`account/${email}/requestpasswordreminder`);\n  }\n\n  changePassword(email, currentPassword, newPassword) {\n    if (!email || !currentPassword || !newPassword) throw new Error('All parameters are required');\n    return this._fetch(`account/changePassword?emailaddress=${email}&currentpassword=${encodeURIComponent(currentPassword)}&newpassword=${encodeURIComponent(newPassword)}`, undefined, 'POST');\n  }\n\n  // Countries resource\n  getCountries() {\n    return this._fetch('countries');\n  }\n\n  // Currency resource\n  getCurrencies() {\n    return this._fetch('fundraising/currencies');\n  }\n\n  // Charity resource\n  getCharityCategories() {\n    return this._fetch('charity/categories');\n  }\n\n  getCharity(charityId) {\n    return this._fetch(`charity/${charityId}`);\n  }\n\n  getEventsByCharity(charityId, pageSize, pageNum) {\n    const pagination = new Pagination(pageNum, pageSize);\n    return this._fetch(`charity/${charityId}/events?${pagination.pageSizeRestriction}${pagination.pageNumRestriction}`);\n  }\n\n  // Donation resource\n  getDonation(donationId) {\n    return this._fetch(`donation/${donationId}`);\n  }\n\n  getDonationByReference(thirdPartyReference) {\n    return this._fetch(`donation/ref/${encodeURIComponent(thirdPartyReference)}`);\n  }\n\n  getDonationStatus(donationId) {\n    return this._fetch(`donation/${donationId}/status`);\n  }\n\n  // Event resource\n  getEvent(eventId) {\n    return this._fetch(`event/${eventId}`);\n  }\n\n  getEventPages(eventId, pageSize, pageNum) {\n    const pagination = new Pagination(pageNum, pageSize);\n    return this._fetch(`event/${eventId}/pages?${pagination.pageSizeRestriction}${pagination.pageRestriction}`);\n  }\n\n  registerEvent(eventDetails) {\n    return this._fetch('event', eventDetails);\n  }\n\n  // Fundraising resource\n  getFundraisingPages() {\n    return this._fetch('fundraising/pages');\n  }\n\n  getFundraisingPage(pageShortName) {\n    return this._fetch(`fundraising/pages/${encodeURIComponent(pageShortName)}`);\n  }\n\n  suggestPageShortName(preferredName) {\n    return this._fetch(`fundraising/pages/suggest?preferredName=${encodeURIComponent(preferredName)}`);\n  }\n\n  checkPageExists(pageShortName) {\n    return this._fetch(`fundraising/pages/${pageShortName}`, undefined, 'HEAD');\n  }\n\n  cancelFundraisingPage(pageShortName) {\n    return this._fetch(`fundraising/pages/${pageShortName}`, undefined, 'DELETE');\n  }\n\n  addFundraisingPageImage(pageShortName, caption, url, isDefault) {\n    return this._fetch(`fundraising/pages/${pageShortName}/images`, {caption: caption, isDefault: !!isDefault, url: url}, 'PUT');\n  }\n\n  // // OneSearch resource\n  // onesearch(searchTerm, grouping, index, pageSize, pageNum, country) {\n  //   return this._fetch(`onesearch?q=${encodeURIComponent(searchTerm)}&g=${encodeURIComponent(grouping)}&i=${encodeURIComponent(index)}&limit=${pageSize}&offset=${pageNum}&country=${country}`);\n  // }\n\n  // Project resource\n  getProject(projectId) {\n    return this._fetch(`project/global/${projectId}`);\n  }\n\n  // Search resource\n  searchCharities(searchTerm, charityId, categoryId, pageNum, pageSize) {\n    const pagination = new Pagination(pageNum, pageSize);\n    const charityIdRestriction = charityId.length ? charityId.map(id => `charityId=${id}&`).join('') : `charityId=${charityId}&`;\n    const categoryIdRestriction = categoryId.length ? categoryId.map(id => `categoryId=${id}&`).join('') : `categoryId=${categoryId}&`;\n    return this._fetch(`charity/search?q=${encodeURIComponent(searchTerm)}&${categoryIdRestriction}${charityIdRestriction}${pagination.pageSizeRestriction}${pagination.pageRestriction}`);\n  }\n\n  searchEvents(searchTerm, pageNum, pageSize) {\n    const pagination = new Pagination(pageNum, pageSize);\n    return this._fetch(`event/search?q=${encodeURIComponent(searchTerm)}&${pagination.pageSizeRestriction}${pagination.pageRestriction}`);\n  }\n\n  // OneSearch\n  oneSearch(searchTerm, group, index, limit, offset, country) {\n    const pagination = new Pagination(offset, limit);\n    // return this._fetch(`onesearch?q=${searchTerm}&g=${group}&i=${index}&${pagination.limitRestriction}${pagination.offsetRestriction}country=${country}`);\n    var queryStr = '';\n\n    queryStr = this._processParam(queryStr, 'q', searchTerm);\n    queryStr = this._processParam(queryStr, 'g', group);\n    queryStr = this._processParam(queryStr, 'i', index);\n    queryStr = this._processParam(queryStr, 'country', country);\n\n    // Ugly mess to fix the inconsistencies between _processParam and paginator,\n    // a unified solution needs to be put in place\n    if(queryStr.length > 0 && (offset || limit) ) {\n      queryStr += '&';\n    }\n    else if(offset || limit) {\n      queryStr += '?';\n    }\n\n    queryStr += pagination.limitRestriction;\n    queryStr += pagination.offsetRestriction;\n\n\n\n\n    return this._fetch(`onesearch${queryStr}`);\n  }\n\n  // Team resource\n  getTeam(shortName) {\n    return this._fetch(`team/${encodeURIComponent(shortName)}`);\n  }\n\n  checkTeamExists(shortName) {\n    return this._fetch(`team/${encodeURIComponent(shortName)}`, undefined, 'HEAD');\n  }\n\n  createOrUpdateTeam(shortName, details) {\n    return this._fetch(`team/${encodeURIComponent(shortName)}`, details, 'PUT');\n  }\n\n  joinTeam(teamShortName, pageShortName) {\n    return this._fetch(`team/join/${encodeURIComponent(teamShortName)}`, {pageShortName: pageShortName}, 'PUT');\n  }\n}\n"],"sourceRoot":"/source/"}